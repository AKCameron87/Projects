<!-- Screen-only toolbar -->
<div class="report-toolbar no-print">
  <button class="back-btn" (click)="goBack()">‚Üê Back to Dashboard</button>
  <button class="print-btn" (click)="printReport()">üñ®Ô∏è Print / Save as PDF</button>
</div>

<!-- Printable Report -->
<div class="report">
  <!-- Header -->
  <header class="report-header">
    <div class="report-brand">
      <h1>üõ°Ô∏è SecureCheck</h1>
      <p>Security Hygiene Report</p>
    </div>
    <div class="report-meta">
      <p>Generated: {{ generatedDate }}</p>
    </div>
  </header>

  <!-- Executive Summary -->
  <section class="report-section summary-section">
    <h2>Executive Summary</h2>
    <div class="summary-grid">
      <div class="summary-card grade-card" [class]="scoreClass">
        <span class="grade">{{ scoreGrade }}</span>
        <span class="grade-label">Security Grade</span>
      </div>
      <div class="summary-card">
        <span class="summary-value" [class]="scoreClass">{{ overallScore }}%</span>
        <span class="summary-label">Overall Score</span>
      </div>
      <div class="summary-card">
        <span class="summary-value">{{ completedCount }}/{{ totalCount }}</span>
        <span class="summary-label">Tasks Completed</span>
      </div>
      <div class="summary-card">
        <span class="summary-value high">{{ incompleteHighRisk.length }}</span>
        <span class="summary-label">High Risk Remaining</span>
      </div>
    </div>
  </section>

  <!-- Critical Findings -->
  @if (incompleteHighRisk.length > 0) {
    <section class="report-section findings-section">
      <h2>‚ö†Ô∏è Critical Findings</h2>
      <p class="section-desc">These high-risk items require immediate attention:</p>
      <div class="findings-list">
        @for (item of incompleteHighRisk; track item.id) {
          <div class="finding-item">
            <div class="finding-marker">!</div>
            <div class="finding-content">
              <h4>{{ item.title }}</h4>
              <p>{{ item.tip }}</p>
            </div>
          </div>
        }
      </div>
    </section>
  }

  <!-- Recommendations -->
  @if (incompleteMediumRisk.length > 0) {
    <section class="report-section">
      <h2>üìã Recommendations</h2>
      <p class="section-desc">Medium-risk items to address when possible:</p>
      <div class="findings-list">
        @for (item of incompleteMediumRisk; track item.id) {
          <div class="finding-item recommendation">
            <div class="finding-marker rec">‚óè</div>
            <div class="finding-content">
              <h4>{{ item.title }}</h4>
              <p>{{ item.tip }}</p>
            </div>
          </div>
        }
      </div>
    </section>
  }

  <!-- Category Breakdown -->
  <section class="report-section">
    <h2>Category Breakdown</h2>
    @for (category of categories; track category.type) {
      <div class="category-report">
        <div class="category-report-header">
          <h3>{{ category.icon }} {{ category.label }}</h3>
          <span class="category-report-score">
            {{ getCategoryCompleted(category.type) }}/{{ getCategoryTotal(category.type) }} ‚Äî {{ getCategoryProgress(category.type) }}%
          </span>
        </div>
        <div class="category-progress-bar">
          <div
            class="category-progress-fill"
            [style.width.%]="getCategoryProgress(category.type)"
          ></div>
        </div>
        <table class="items-table">
          <thead>
            <tr>
              <th>Status</th>
              <th>Item</th>
              <th>Risk</th>
            </tr>
          </thead>
          <tbody>
            @for (item of getCategoryItems(category.type); track item.id) {
              <tr [class.completed-row]="item.completed">
                <td>
                  <span class="status-icon" [class.done]="item.completed">
                    {{ item.completed ? '‚úÖ' : '‚ùå' }}
                  </span>
                </td>
                <td>{{ item.title }}</td>
                <td>
                  <span class="table-risk" [class]="'risk-' + item.riskLevel">
                    {{ item.riskLevel | titlecase }}
                  </span>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    }
  </section>

  <!-- Footer -->
  <footer class="report-footer">
    <p>Generated by SecureCheck ‚Äî Your Personal Security Hygiene Tracker</p>
    <p>This report is a snapshot of your security posture at the time of generation.</p>
  </footer>
</div>